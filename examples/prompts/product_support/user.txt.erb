Customer <%= customer[:name] %> asks: <%= message %>

## Relevant Products
<% if products&.any? %>
<% products.each do |product| %>
### <%= product[:name] %>
- SKU: <%= product[:sku] %>
- Price: $<%= product[:price] %>
- Category: <%= product[:category] %>
- In Stock: <%= product[:in_stock] ? "Yes (#{product[:quantity]} available)" : "No" %>
<% if product[:features]&.any? %>
- Features:
<% product[:features].each do |feature| %>
  - <%= feature %>
<% end %>
<% end %>
<% if product[:compatible_with]&.any? %>
- Compatible With: <%= product[:compatible_with].join(", ") %>
<% end %>
<% end %>
<% else %>
No specific products matched the query. Provide general guidance.
<% end %>

<% if promotions&.any? %>
## Current Promotions
<% promotions.each do |promo| %>
- **<%= promo[:name] %>**: <%= promo[:description] %> (Code: <%= promo[:code] %>)
<% end %>
<% end %>

Please help the customer with their product question.
